# 帳號管理系統使用指南

## 🎯 系統概述

Insight Software Portals 現在擁有完整的帳號管理系統，包括：
- 🔐 專業登入頁面
- 📊 控制台儀表板
- ⚙️ 帳號設定與密碼管理

## 📱 頁面結構

### 1. 登入頁面 (`/login`)

**功能特色**：
- ✨ 現代化設計，參考 [兌心科技](https://www.insight-software.com/) 風格
- 🎨 漸層紫藍色背景
- 🔒 安全的表單驗證
- 📱 響應式設計

**預設帳號**：
```
主要管理員：
- 帳號：admin
- 密碼：admin123
- 權限：MAIN_ADMIN（完整權限）

平台管理員：
- 帳號：platform_admin
- 密碼：platform123
- 權限：PLATFORM_ADMIN（受限權限）
```

**訪問方式**：
```
http://localhost:8080/login
http://localhost:8080/          (自動重定向到登入頁)
```

### 2. 控制台 (`/dashboard`)

登入成功後的主頁面，顯示：

**統計卡片**：
- 🌐 串流平台數量
- 📹 活躍相機數量
- ⏱️ 速率限制設定
- 👤 當前角色權限

**快速操作**：
- 平台管理
- 相機管理
- 批量匯入
- 帳號設定

**特色功能**：
- 顯示當前登入用戶資訊
- 一鍵登出按鈕
- 自動刷新（每30秒）
- 快速導航選單

### 3. 帳號設定 (`/account/settings`)

**功能模組**：

#### A. 帳號資訊
- 顯示當前帳號名稱（不可修改）
- 顯示角色權限
- 顯示最後登入時間
- 電子郵件設定（待實作）
- 顯示名稱設定（待實作）

#### B. 密碼變更
- 輸入目前密碼驗證
- 設定新密碼
- 確認新密碼
- 密碼強度要求提示

**密碼要求**：
```
✓ 至少 8 個字元
✓ 包含大小寫英文字母
✓ 包含至少一個數字
✓ 建議包含特殊符號 (!@#$%^&*)
```

#### C. 安全建議
- 定期更換密碼提醒
- 密碼安全最佳實踐
- 帳號保護指南

## 🚀 使用流程

### 完整登入流程

```
1. 訪問系統
   ↓
2. 開啟登入頁面
   http://localhost:8080/login
   ↓
3. 輸入帳號和密碼
   - 帳號：admin
   - 密碼：admin123
   ↓
4. （可選）勾選「記住我」
   ↓
5. 點擊「登入系統」按鈕
   ↓
6. 驗證成功
   ↓
7. 自動跳轉到控制台
   http://localhost:8080/dashboard
   ↓
8. 開始使用系統
```

### 修改密碼流程

```
1. 登入系統
   ↓
2. 點擊導航列的「帳號設定」
   或訪問 /account/settings
   ↓
3. 捲動到「變更密碼」區塊
   ↓
4. 輸入目前密碼
   ↓
5. 輸入新密碼
   ↓
6. 再次確認新密碼
   ↓
7. 點擊「更新密碼」按鈕
   ↓
8. 系統驗證並更新
   ↓
9. 顯示成功訊息
```

### 登出流程

```
1. 點擊右上角的「登出」按鈕
   ↓
2. 系統清除會話
   ↓
3. 自動跳轉回登入頁面
   ↓
4. 顯示登出成功訊息
```

## 🎨 頁面預覽

### 登入頁面特色
```
┌──────────────────────────────────────────────┐
│  左側品牌區                │  右側登入區      │
│                          │                  │
│  • Insight Logo          │  歡迎回來         │
│  • Slogan                │                  │
│  • 系統特色列表          │  帳號輸入框       │
│                          │  密碼輸入框       │
│                          │  □ 記住我         │
│                          │  [登入系統]       │
└──────────────────────────────────────────────┘
```

### 控制台佈局
```
┌──────────────────────────────────────────────┐
│  Insight Software Portals  [控制台] [帳號]    │
├──────────────────────────────────────────────┤
│  歡迎回來，Admin！                            │
│  [平台管理] [相機管理] [匯入] [設定]          │
├──────────────────────────────────────────────┤
│  [串流平台: 4]  [活躍相機: 3]                │
│  [速率限制: 60秒]  [角色: ADMIN]              │
└──────────────────────────────────────────────┘
```

### 帳號設定頁面
```
┌──────────────────────────────────────────────┐
│  帳號設定                                     │
├──────────────────────────────────────────────┤
│  👤 帳號資訊                                  │
│  • 帳號名稱: admin (不可修改)                │
│  • 角色權限: MAIN_ADMIN                      │
│  • 電子郵件: [輸入框]                        │
├──────────────────────────────────────────────┤
│  🔒 變更密碼                                  │
│  • 目前密碼: [輸入框]                        │
│  • 新密碼: [輸入框]                          │
│  • 確認新密碼: [輸入框]                      │
│  [更新密碼] [取消]                            │
├──────────────────────────────────────────────┤
│  🛡️ 安全建議                                 │
│  • 定期更換密碼                              │
│  • 使用強密碼                                │
└──────────────────────────────────────────────┘
```

## 🔧 技術實現

### 前端技術
- **HTML/CSS**: 響應式設計
- **Thymeleaf**: 伺服器端渲染
- **JavaScript**: 表單驗證和動畫效果

### 後端技術
- **Spring Security**: 認證授權
- **Session Management**: 會話管理
- **BCrypt**: 密碼加密

### 安全特性
- ✅ CSRF Token 保護
- ✅ BCrypt 密碼加密
- ✅ Session 自動過期
- ✅ 安全標頭設定
- ✅ XSS 防護

## 📋 快速測試

### 測試登入功能
```bash
# 1. 啟動應用
docker-compose up -d

# 2. 訪問登入頁
curl -I http://localhost:8080/login

# 3. 使用瀏覽器測試
open http://localhost:8080/login
```

### 測試控制台
```bash
# 登入後訪問
open http://localhost:8080/dashboard
```

### 測試帳號設定
```bash
# 登入後訪問
open http://localhost:8080/account/settings
```

## 🎯 權限說明

### MAIN_ADMIN（主要管理員）
**可以訪問**：
- ✅ 控制台
- ✅ 所有平台管理
- ✅ 所有相機管理
- ✅ 批量匯入功能
- ✅ 帳號設定
- ✅ 新增/修改平台
- ✅ 測試平台連通性

### PLATFORM_ADMIN（平台管理員）
**可以訪問**：
- ✅ 控制台
- ✅ 被授權的平台
- ✅ 被授權平台的相機
- ✅ 帳號設定
- ❌ 無法新增/修改平台
- ❌ 無法批量匯入

## 🔐 安全最佳實踐

### 對於管理員
1. **定期更換密碼**
   - 建議每 90 天更換一次
   - 使用密碼管理器生成強密碼

2. **密碼安全**
   - 不要使用常見密碼
   - 不要在多個系統使用相同密碼
   - 避免包含個人資訊

3. **使用習慣**
   - 完成操作後記得登出
   - 不要在公共電腦勾選「記住我」
   - 注意異常登入活動

4. **生產環境**
   - 必須更改預設密碼
   - 啟用 HTTPS
   - 設定防火牆規則
   - 啟用 IP 白名單

### 修改預設密碼

#### 方法 1: 環境變數
```bash
export ADMIN_PASSWORD=your_secure_password_here
./mvnw spring-boot:run
```

#### 方法 2: 修改設定檔
```yaml
# application.yaml
spring:
  security:
    user:
      password: ${ADMIN_PASSWORD:your_secure_password}
```

#### 方法 3: Docker Compose
```yaml
# docker-compose.yml
services:
  app:
    environment:
      - ADMIN_PASSWORD=your_secure_password
```

## 🐛 常見問題

### 1. 無法登入
**症狀**: 密碼正確但無法登入
**解決方案**:
- 檢查帳號是否正確（區分大小寫）
- 清除瀏覽器 Cookie
- 檢查應用日誌

### 2. 登入後立即登出
**症狀**: 登入成功但馬上回到登入頁
**解決方案**:
- 檢查瀏覽器 Cookie 設定
- 確保允許第三方 Cookie
- 清除瀏覽器快取

### 3. 頁面樣式跑版
**症狀**: 頁面顯示不正常
**解決方案**:
- 使用現代瀏覽器（Chrome 90+）
- 清除瀏覽器快取
- 強制重新載入（Ctrl+Shift+R）

### 4. 修改密碼失敗
**症狀**: 更新密碼時出現錯誤
**解決方案**:
- 確認目前密碼正確
- 確認新密碼符合要求
- 確認兩次輸入的新密碼相同

## 📚 相關文檔

- [登入頁面說明](LOGIN_PAGE.md)
- [快速開始指南](QUICKSTART_CN.md)
- [完整 README](README.md)
- [實施總結](IMPLEMENTATION_SUMMARY.md)

## 🔗 相關連結

- [兌心科技官網](https://www.insight-software.com/)
- [Spring Security 文檔](https://spring.io/projects/spring-security)

## 📞 支援

如遇到問題，請：
1. 查看應用日誌：`docker-compose logs -f app`
2. 檢查健康狀態：`curl http://localhost:8080/actuator/health`
3. 聯絡系統管理員

---

© 2025 [兌心科技有限公司 Insight Software](https://www.insight-software.com/). All Rights Reserved.



